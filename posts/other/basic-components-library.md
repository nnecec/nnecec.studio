---
title: '组件库的技术点总结'
date: '2022-10-11'
tags: ['']
description: ''
---

## 前言

业界有很多组件库的建设方案，从代码到文档都有很多现成的工具可以使用。本文将介绍建设组件库需要的技术点，并提供合适的示例。

### 1. 明确适合的代码组织方案

首先，在搭建组件库之前，应当明确一个大致的组件路线。因为基础组件已经有了很多优秀的开源库可以选用，大多数企业组件库都是基于开源组件库进一步开发需要满足自身需求的组件库。

对于企业的业务组件库，不推荐用 monorepo 的组织方式，主要原因如下：

- 单个组件的代码量较少
- 维护单个包及在业务代码中更新依赖更方便、清晰
- 组件可以共享依赖、工具方法
- 内部组件层级更扁平化，而 monorepo 更适合层级化的依赖结构
- ESM 原生支持 Tree-shaking，不需要考虑代码冗余

对于多端的业务组件库，倒是适合通过 monorepo 的方式组织代码，如

```
- ui
  - mobile
  - laptop
  - utils
```

### 2. 构建方案

Rollup 更适合在该场景使用。虽然 vite 也提供了 lib 模式的构建能力，但 vite@3 底层仍然依赖 Rollup 作为构建工具，并且配置起来不如直接使用 Rollup 灵活。

### 3. 使用 TypeScript

在
